@startuml Sửa sản phẩm
title Biểu đồ tuần tự - Sửa sản phẩm

actor "Quản trị viên" as Admin
participant "Trình duyệt" as Browser
participant "ProductController" as Controller
participant "Product Model" as ProductModel
participant "Database" as DB

Admin -> Browser: Chọn sản phẩm cần sửa
Browser -> Controller: GET /products/{id}/edit
Controller -> ProductModel: findById(productId)
ProductModel -> DB: SELECT * FROM products WHERE id = ?
DB -> ProductModel: Trả về thông tin sản phẩm
Controller -> Browser: Hiển thị form sửa sản phẩm

Admin -> Browser: Chỉnh sửa thông tin sản phẩm
Admin -> Browser: Nhấn "Cập nhật sản phẩm"
Browser -> Controller: PUT /products/{id}

Controller -> Controller: Validate input data

alt Validation thành công
    Controller -> ProductModel: update(productData)
    ProductModel -> DB: UPDATE products SET ... WHERE id = ?
    DB -> ProductModel: Confirm update
    
    Controller -> Browser: Redirect với thông báo thành công
    Browser -> Admin: Hiển thị danh sách sản phẩm
    
else Validation thất bại
    Controller -> Browser: Redirect back with errors
    Browser -> Admin: Hiển thị form với thông báo lỗi
end

@enduml
