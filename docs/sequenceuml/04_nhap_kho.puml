@startuml Nhập kho
title Biểu đồ tuần tự - Nhập kho

actor "Quản trị viên" as Admin
participant "Trình duyệt" as Browser
participant "InventoryController" as Controller
participant "Product Model" as ProductModel
participant "Database" as DB

Admin -> Browser: Chọn sản phẩm cần nhập kho
Browser -> Controller: GET /inventory/{product}/adjust
Controller -> ProductModel: findById(productId)
ProductModel -> DB: SELECT * FROM products WHERE id = ?
Controller -> Browser: Hiển thị form điều chỉnh tồn kho

Admin -> Browser: Chọn loại giao dịch "Nhập kho"
Admin -> Browser: Nhập số lượng nhập
Admin -> Browser: Nhấn "Cập nhật tồn kho"
Browser -> Controller: POST /inventory/{product}/adjust

Controller -> Controller: Validate input data

alt Validation thành công
    Controller -> ProductModel: updateStock(productId, newStock)
    ProductModel -> DB: UPDATE products SET stock = stock + quantity
    DB -> ProductModel: Confirm update
    
    Controller -> Browser: Redirect với thông báo thành công
    Browser -> Admin: Hiển thị trang tồn kho với thông báo
    
else Validation thất bại
    Controller -> Browser: Redirect back with errors
    Browser -> Admin: Hiển thị form với thông báo lỗi
end

@enduml
