@startuml Tạo vận đơn
title Tạo vận đơn (đơn giản)

actor Admin
participant Browser
participant Controller
participant ShipmentModel
participant OrderModel
participant DB

Admin -> Browser: Mở trang tạo vận đơn
Browser -> Controller: Yêu cầu form tạo vận đơn
Controller -> OrderModel: Lấy thông tin đơn hàng
OrderModel -> DB: Lấy dữ liệu đơn hàng
OrderModel -> Controller: Trả dữ liệu
Controller -> Browser: Hiển thị form

Admin -> Browser: Nhập thông tin, nhấn "Tạo vận đơn"
Browser -> Controller: Gửi dữ liệu vận đơn

alt Dữ liệu hợp lệ
    Controller -> ShipmentModel: Thêm vận đơn
    ShipmentModel -> DB: Lưu vận đơn
    DB -> ShipmentModel: OK
    ShipmentModel -> Controller: OK
    Controller -> OrderModel: Cập nhật trạng thái đơn hàng
    OrderModel -> DB: Lưu trạng thái mới
    DB -> OrderModel: OK
    OrderModel -> Controller: OK
    Controller -> Browser: Thông báo thành công
else Dữ liệu lỗi
    Controller -> Browser: Thông báo lỗi
end

@enduml
